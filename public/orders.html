<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>Cointology - Admin Panel </title>
    <link rel="stylesheet" href="css/admin.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
      <i class='bx bxl-c-plus-plus icon'></i>
        <div class="logo_name">Cointology</div>
        <i class='bx bx-menu' id="btn" ></i>
    </div>
    <ul class="nav-list">
      <li>
        <a href="dashboard.html">
          <i class='bx bx-grid-alt'></i>
          <span class="links_name">Dashboard</span>
        </a>
         <span class="tooltip">Dashboard</span>
      </li>
      <li>
       <a href="players.html">
         <i class='bx bx-user' ></i>
         <span class="links_name">Products</span>
       </a>
       <span class="tooltip">Products</span>
     </li>
     <li>
       <a href="matches.html">
        <i class='bx bx-stats'></i>
         <span class="links_name">Orders</span>
       </a>
       <span class="tooltip">Orders</span>
     </li>
     <li>
       <a href="table.html">
        <i class='bx bx-table'></i>
         <span class="links_name">Revenue</span>
       </a>
       <span class="tooltip">Revenue</span>
     </li>
     <li>
       <a href="teamgenerator.html">
        <i class='bx bxl-microsoft-teams'></i>
         <span class="links_name">Refunds</span>
       </a>
       <span class="tooltip">Refunds</span>
     </li>
     <li>
       <a href="awards.html">
        <i class='bx bx-award'></i>
         <span class="links_name">Deliveries</span>
       </a>
       <span class="tooltip">Deliveries</span>
     </li>
     <li>
       <a href="comingsoon.html">
        <i class='bx bx-video-recording' ></i>
         <span class="links_name">Updates</span>
       </a>
       <span class="tooltip">Updates</span>
     </li>
     <li>
       <a href="compare.html">
        <i class='bx bx-git-compare'></i>
        <span class="links_name">Contact</span>
       </a>
       <span class="tooltip">Contact</span>
     </li>
    </ul>
  </div>
  <section class="home-section">
      <div class="top-container">
        <div class="big-text">Orders</div>
        <button class="add-product">Add a Product</button>
      </div>

      <table id="orders-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Items</th>
            <th>Price (Â£)</th>
            <th>Stock</th>
            <th>Address</th>
            <th>Email</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      



  </section>


<script src="menu.js"></script>
<script src="orders.js"></script>
<script>
  // Function to fetch and render orders from the server
  function fetchAndRenderOrders() {
    fetch('/api/orders')
      .then(response => {
        if (!response.ok) {
          throw new Error('Error fetching orders');
        }
        return response.json();
      })
      .then(orders => {
        renderOrdersTable(orders);
      })
      .catch(error => {
        console.error('Error fetching orders:', error.message);
      });
  }

  // Function to render orders table
  function renderOrdersTable(orders) {
    // Assuming your table has an id "orders-table"
    const orderTbody = document.querySelector('#orders-table tbody');

    // Clear existing table content
    orderTbody.innerHTML = '';

    // Render orders
    orders.forEach(order => {
      const row = orderTbody.insertRow();
      row.insertCell(0).textContent = order._id;
      row.insertCell(1).textContent = order.lineItems;
      row.insertCell(2).textContent = order.price;
      const imageCell = row.insertCell(3);
      const img = document.createElement('img');
      img.className = 'table-image';
      img.src = order.image;
      img.alt = 'order Image';
      imageCell.appendChild(img);
      row.insertCell(4).textContent = order.stock;
      row.insertCell(5).textContent = order.address;
      row.insertCell(6).textContent = order.email;
    });
  }

  // Periodically fetch and render orders (adjust the interval as needed)
  setInterval(fetchAndRenderOrders, 5000);

  // Initial fetch and render on page load
  fetchAndRenderOrders();
</script>
</body>
</html>